<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.hotel.provider.mapper.OauthPermissionMapper">
    <resultMap id="BaseResultMap" type="com.demo.hotel.provider.domain.OauthPermission">
        <!--@mbg.generated generated on Thu Apr 02 19:39:50 CST 2020.-->
        <!--@Table oauth_permission-->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="parent_id" jdbcType="BIGINT" property="parentId"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
        <result column="enname" jdbcType="VARCHAR" property="enname"/>
        <result column="url" jdbcType="VARCHAR" property="url"/>
        <result column="description" jdbcType="VARCHAR" property="description"/>
        <result column="created" jdbcType="TIMESTAMP" property="created"/>
        <result column="updated" jdbcType="TIMESTAMP" property="updated"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--@mbg.generated generated on Thu Apr 02 19:39:50 CST 2020.-->
        id, parent_id, `name`, enname, url, description, created, updated
    </sql>
    <select id="selectByUserId" resultMap="BaseResultMap">
    select
	    p.*
    from
	    admin as u
    left join oauth_user_role as ur on
	    u.id = ur.user_id
    left join oauth_role as r on
	    r.id = ur.role_id
    left join oauth_role_permission as rp on
	    r.id = rp.role_id
    left join oauth_permission as p on
	    p.id = rp.permission_id
    where
	    u.id = #{id}
    </select>
</mapper>